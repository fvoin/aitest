<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="ru"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Арканоид&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background-color: #f0f0f0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>canvas {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #eee;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 20px auto;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 2px solid #0095DD;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;canvas id="myCanvas" width="480" height="320"&gt;&lt;/canvas&gt;</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Получаем ссылку на canvas и его контекст для рисования</p>
<p class="p1"><span class="Apple-converted-space">    </span>const canvas = document.getElementById("myCanvas");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const ctx = canvas.getContext("2d");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Свойства мяча</p>
<p class="p1"><span class="Apple-converted-space">    </span>let ballRadius = 10;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let x = canvas.width / 2;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let y = canvas.height - 30;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let dx = 2;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let dy = -2;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Свойства платформы</p>
<p class="p1"><span class="Apple-converted-space">    </span>const paddleHeight = 10;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const paddleWidth = 75;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let paddleX = (canvas.width - paddleWidth) / 2;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Флаги нажатия клавиш</p>
<p class="p1"><span class="Apple-converted-space">    </span>let rightPressed = false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let leftPressed = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Свойства кирпичиков</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickRowCount = 5;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickColumnCount = 7;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickWidth = 55;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickHeight = 20;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickPadding = 10;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickOffsetTop = 30;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const brickOffsetLeft = 30;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let bricks = [];</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let c = 0; c &lt; brickColumnCount; c++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>bricks[c] = [];</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let r = 0; r &lt; brickRowCount; r++) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>bricks[c][r] = { x: 0, y: 0, status: 1 }; // статус 1 – кирпич виден</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Счет и жизни</p>
<p class="p1"><span class="Apple-converted-space">    </span>let score = 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let lives = 3;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Обработчики событий для клавиатуры и мыши</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.addEventListener("keydown", keyDownHandler, false);</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.addEventListener("keyup", keyUpHandler, false);</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.addEventListener("mousemove", mouseMoveHandler, false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function keyDownHandler(e) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (e.key === "Right" || e.key === "ArrowRight") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>rightPressed = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else if (e.key === "Left" || e.key === "ArrowLeft") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>leftPressed = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function keyUpHandler(e) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (e.key === "Right" || e.key === "ArrowRight") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>rightPressed = false;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else if (e.key === "Left" || e.key === "ArrowLeft") {</p>
<p class="p1"><span class="Apple-converted-space">        </span>leftPressed = false;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function mouseMoveHandler(e) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let relativeX = e.clientX - canvas.offsetLeft;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (relativeX &gt; 0 &amp;&amp; relativeX &lt; canvas.width) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>paddleX = relativeX - paddleWidth / 2;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Функция обнаружения столкновений мяча с кирпичами</p>
<p class="p1"><span class="Apple-converted-space">    </span>function collisionDetection() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let c = 0; c &lt; brickColumnCount; c++) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let r = 0; r &lt; brickRowCount; r++) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>let b = bricks[c][r];</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (b.status === 1) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (x &gt; b.x &amp;&amp; x &lt; b.x + brickWidth &amp;&amp; y &gt; b.y &amp;&amp; y &lt; b.y + brickHeight) {</p>
<p class="p1"><span class="Apple-converted-space">              </span>dy = -dy;</p>
<p class="p1"><span class="Apple-converted-space">              </span>b.status = 0;</p>
<p class="p1"><span class="Apple-converted-space">              </span>score++;</p>
<p class="p1"><span class="Apple-converted-space">              </span>if (score === brickRowCount * brickColumnCount) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>alert("Поздравляем, вы победили!");</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.location.reload();</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Рисуем мяч</p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawBall() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.arc(x, y, ballRadius, 0, Math.PI * 2);</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillStyle = "#0095DD";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fill();</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.closePath();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Рисуем платформу</p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawPaddle() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillStyle = "#0095DD";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fill();</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.closePath();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Рисуем кирпичи</p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawBricks() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let c = 0; c &lt; brickColumnCount; c++) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let r = 0; r &lt; brickRowCount; r++) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (bricks[c][r].status === 1) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let brickY = r * (brickHeight + brickPadding) + brickOffsetTop;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bricks[c][r].x = brickX;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bricks[c][r].y = brickY;</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.rect(brickX, brickY, brickWidth, brickHeight);</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.fillStyle = "#0095DD";</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.fill();</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.closePath();</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Рисуем счет</p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawScore() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.font = "16px Arial";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillStyle = "#0095DD";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillText("Счет: " + score, 8, 20);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Рисуем жизни</p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawLives() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.font = "16px Arial";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillStyle = "#0095DD";</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.fillText("Жизни: " + lives, canvas.width - 65, 20);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Основная функция отрисовки и обновления игры</p>
<p class="p1"><span class="Apple-converted-space">    </span>function draw() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ctx.clearRect(0, 0, canvas.width, canvas.height);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawBricks();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawBall();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawPaddle();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawScore();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLives();</p>
<p class="p1"><span class="Apple-converted-space">      </span>collisionDetection();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Отскок мяча от боковых стен</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (x + dx &gt; canvas.width - ballRadius || x + dx &lt; ballRadius) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>dx = -dx;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>// Отскок от верхней стены</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (y + dy &lt; ballRadius) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>dy = -dy;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else if (y + dy &gt; canvas.height - ballRadius) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Если мяч достиг низа, проверяем, попал ли он по платформе</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (x &gt; paddleX &amp;&amp; x &lt; paddleX + paddleWidth) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>dy = -dy;</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>lives--;</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (!lives) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>alert("Игра окончена");</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.location.reload();</p>
<p class="p1"><span class="Apple-converted-space">          </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// При потере жизни сбрасываем положение мяча и платформы</p>
<p class="p1"><span class="Apple-converted-space">            </span>x = canvas.width / 2;</p>
<p class="p1"><span class="Apple-converted-space">            </span>y = canvas.height - 30;</p>
<p class="p1"><span class="Apple-converted-space">            </span>dx = 2;</p>
<p class="p1"><span class="Apple-converted-space">            </span>dy = -2;</p>
<p class="p1"><span class="Apple-converted-space">            </span>paddleX = (canvas.width - paddleWidth) / 2;</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Обновляем положение мяча</p>
<p class="p1"><span class="Apple-converted-space">      </span>x += dx;</p>
<p class="p1"><span class="Apple-converted-space">      </span>y += dy;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Двигаем платформу</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (rightPressed &amp;&amp; paddleX &lt; canvas.width - paddleWidth) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>paddleX += 7;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (leftPressed &amp;&amp; paddleX &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>paddleX -= 7;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>requestAnimationFrame(draw);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Запуск игрового цикла</p>
<p class="p1"><span class="Apple-converted-space">    </span>draw();</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
